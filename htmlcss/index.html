<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RunePass</title>
    <link rel="stylesheet" href="@/assets/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
  </head>
  <body>
    <div class="container">
      <h1>RunePass</h1>
      <div class="checkmarks">
        <div>
          <input
            v-model="options.upperCase"
            class="check"
            type="checkbox"
            id="Upper-Case"
            @change="updateLength"
          />
          <label for="Upper-Case">Letras Maiúsculas (A - Z)</label>
        </div>
        <div>
          <input
            v-model="options.lowerCase"
            class="check"
            type="checkbox"
            id="Lower-Case"
            @change="updateLength"
          />
          <label for="Lower-Case">Letras Minúsculas (a - z)</label>
        </div>
        <div>
          <input
            v-model="options.digits"
            class="check"
            type="checkbox"
            id="Digitos"
            @change="updateLength"
          />
          <label for="Digitos">Dígitos (0 - 9)</label>
        </div>
        <div>
          <input
            v-model="options.symbols"
            class="check"
            type="checkbox"
            id="Simbolos"
            @change="updateLength"
          />
          <label for="Simbolos">Símbolos (@, %, /, #, & etc...)</label>
        </div>
      </div>
      <div class="comprimento">
        <label for="Comprimento">Comprimento: </label>
        <div class="custom-number">
          <button
            @click="decrementLength"
            @mousedown="startDecrement"
            @mouseup="stopInterval"
            @mouseleave="stopInterval"
          >
            −
          </button>
          <input
            type="number"
            v-model.number="options.length"
            id="Comprimento"
            min="1"
            max="99"
          />
          <button
            @click="incrementLength"
            @mousedown="startIncrement"
            @mouseup="stopInterval"
            @mouseleave="stopInterval"
          >
            +
          </button>
        </div>
      </div>
      <button class="pushable" @click="generatePassword">
        <span class="front">Gerar Senha</span>
      </button>
      <div id="passwordResult" class="password-result" v-if="password">
        <i class="fa-solid fa-copy copy-icon" @click="copyPassword"></i>
        <span>{{ password }}</span>
      </div>
    </div>
  </body>

  <script>
    let interval;
    const input = document.getElementById("Comprimento");
    const plusButton = document.querySelector(".plus");
    const minusButton = document.querySelector(".minus");
    const generateBtn = document.getElementById("generateBtn");
    const passwordResult = document.getElementById("passwordResult");

    function increaseValue() {
      if (parseInt(input.value) < parseInt(input.max)) {
        input.value = parseInt(input.value) + 1;
      }
    }

    function decreaseValue() {
      if (parseInt(input.value) > parseInt(input.min)) {
        input.value = parseInt(input.value) - 1;
      }
    }

    function startIncrement() {
      increaseValue();
      interval = setInterval(increaseValue, 100);
    }

    function startDecrement() {
      decreaseValue();
      interval = setInterval(decreaseValue, 100);
    }

    function stopInterval() {
      clearInterval(interval);
    }

    input.addEventListener("input", () => {
      if (input.value === "") return;
      let value = parseInt(input.value);
      if (value < parseInt(input.min)) input.value = input.min;
      if (value > parseInt(input.max)) input.value = input.max;
    });

    plusButton.addEventListener("mousedown", startDecrement);
    plusButton.addEventListener("mouseup", stopInterval);
    plusButton.addEventListener("mouseleave", stopInterval);

    minusButton.addEventListener("mousedown", startIncrement);
    minusButton.addEventListener("mouseup", stopInterval);
    minusButton.addEventListener("mouseleave", stopInterval);

    function generatePassword() {
      const upperCase = document.getElementById("Upper-Case").checked;
      const lowerCase = document.getElementById("Lower-Case").checked;
      const digits = document.getElementById("Digitos").checked;
      const symbols = document.getElementById("Simbolos").checked;
      const length = parseInt(input.value);

      const upperChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
      const lowerChars = "abcdefghijklmnopqrstuvwxyz";
      const digitChars = "0123456789";
      const symbolChars = "@%/#!&*?$()_-,;|";

      let allChars = "";
      if (upperCase) allChars += upperChars;
      if (lowerCase) allChars += lowerChars;
      if (digits) allChars += digitChars;
      if (symbols) allChars += symbolChars;

      if (allChars === "" || length <= 0) {
        passwordResult.textContent =
          "Selecione pelo menos uma opção e defina um comprimento válido.";
        return;
      }

      let password = "";
      for (let i = 0; i < length; i++) {
        password += allChars.charAt(
          Math.floor(Math.random() * allChars.length)
        );
      }

      passwordResult.textContent = `${password}`;
    }

    generateBtn.addEventListener("click", generatePassword);
  </script>
</html>
